version: '3'

services:
    nginx:
        build:
            context: ./bin/nginx
        container_name: 'nginx'
        restart: always
        volumes:
            - ./www:/var/www
        ports:
            - 80:80
            - 443:443
        links:
            - phpfpm
    phpfpm:
        build: 
            context: ./bin/php/74
        container_name: 'phpfpm'
        restart: 'always'
        ports:
            - 9000:9000
        volumes:
            - ./www:/var/www

    # database:
    #     build:
    #         context: ./bin/db/mysql/80
    #     container_name: 'database'
    #     restart: always
    #     ports:
    #         - 3306:3306
    #     environment:
    #         MYSQL_ROOT_PASSWORD: 123456789
    #         MYSQL_DATABASE: docker
    #         MYSQL_USER: docker
    #         MYSQL_PASSWORD: 123456789
    # phpmyadmin:
    #     image: 'phpmyadmin'
    #     container_name: 'phpmyadmin'
    #     links:
    #         - database
    #     environment:
    #         PMA_HOST: database
    #         PMA_PORT: 3306
    #         PMA_USER: root
    #         PMA_PASSWORD: 123456789
    #         MYSQL_ROOT_PASSWORD: 123456789
    #         MYSQL_USER: docker
    #         MYSQL_PASSWORD: docker
    #     ports:
    #         - 8080:80
    #     networks:
    #         - web-network
networks:
    web-network:
        driver: bridge            

